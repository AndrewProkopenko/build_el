(function(){
    const anchors = document.querySelectorAll('a[href*="#"]'); 

    var ua = navigator.userAgent;  
    if (ua.search(/MSIE/) > 0) { console.log(ua) }
    else {  
        for( let anchor = 0 ; anchor < anchors.length; anchor++) { 
            anchors[anchor].addEventListener("click", function(event) { 
               
                const blockID =  anchors[anchor].getAttribute('href');
                event.preventDefault(); 
                document.querySelector('' + blockID).scrollIntoView({
                    behavior: "smooth", 
                    block: "start"
                })
            })
        }
    }
}());

let btnPlain = document.querySelectorAll('.js-send-plain');
let  Plain = document.querySelectorAll('.js-send-plain svg');

for( let i = 0; i < btnPlain.length; i++ ) { 
    btnPlain[i].addEventListener('mousemove', function() { 
        Plain[i].classList.add('start') 
    })
    btnPlain[i].addEventListener('mouseleave', function() { 
        Plain[i].classList.remove('start') 
    }) 
}

$('.js-navbar-toggle').click( function() { 
    $('.js-navbar-toggle span').toggleClass('d-none')
    $('.js-navbar-toggle svg').toggleClass('d-none')
})

  // Function to make IE9+ support forEach:
  if (window.NodeList && !NodeList.prototype.forEach) {
    NodeList.prototype.forEach = Array.prototype.forEach; 
}
let mapContainer = document.querySelector('.js-map-hidden-wrap'); 
let mapWrap = document.querySelector('.js-map-hidden-wrap .wrap'); 

mapContainer.addEventListener('mousemove', function() { 
   mapWrap.classList.add('hide') 
})
mapContainer.addEventListener('mouseleave', function() { 
   mapWrap.classList.remove('hide') 
}) 
 
  
let modalBtn = document.querySelectorAll('.js-modal-btn a'),
    modalCont = document.querySelector('.js-modal'),
    modalCloseCont = document.querySelector('.js-modal .service-modal-container'),
    modalCloseIcon = document.querySelectorAll('.modal-close'); 
let modalContact = document.querySelector('.service-modal-container_contact'); 

 
for (let i = 0 ; i < modalBtn.length; i++) { 
    modalBtn[i].addEventListener('click', openModal)
}
 
for (let i = 0 ; i < modalCloseIcon.length; i++) { 
    modalCloseIcon[i].addEventListener('click', closeModal)
}

modalCont.addEventListener('click', closeModalProps) 
 
 

function openModal(e) {  
    document.body.classList.add('overflow-hidden')
    e.preventDefault()
    modalCont.classList.add('show') 
}

function closeModal() {  
    document.body.classList.remove('overflow-hidden')
    modalCont.classList.remove('show')  
    modalContact.classList.remove('hide') 
}
function closeModalProps(e) {  
    if( e.target == modalCont ||  e.target == modalCloseCont) { 
        document.body.classList.remove('overflow-hidden');
        modalCont.classList.remove('show'); 
        modalContact.classList.remove('hide');
    }  
}
 
 
    new Selectr('#yourcity', { 
        searchable: false
    }); 
    
    
    //  var swiper = new Swiper('.swiper-container', {
      
    //   loop: true, 
    //   navigation: {
    //     nextEl: '.swiper-button-next',
    //     prevEl: '.swiper-button-prev',
    //   },
    //   breakpoints: {
    //     // when window width is >= 320px
    //     320: {
    //       slidesPerView: 1,
    //       spaceBetween: 0
    //     }, 
    //     // when window width is >= 760px
    //     760: {
    //       slidesPerView: 2,
    //       spaceBetween: 30
    //     }
    //   }
    // });  

    $(document).ready(function(){
      $(".owl-carousel").owlCarousel({ 
        loop: true,  
        nav: true,  
        responsive: {
          0:{
              items:1,
              margin: 0,
          },
          768:{
              items:2, 
              margin: 0,
          }
      }
      });
    });
$(window).scroll(function() {
    if ($(this).scrollTop() > 1){  
        $('header').addClass("sticky");
    }
    else{
        $('header').removeClass("sticky");
    }
});
let serviceItem = document.querySelectorAll('.js-service-item');
let serviceBtn = document.querySelector('.js-service-btn'),
    serviceBtnLink = document.querySelector('.js-service-btn a'),
    flag = 0; 
let countServiceItem = 6; 

 
 

for (let i = 0 ; i < serviceItem.length; i++) { 
    if( i >= countServiceItem) { 
        serviceItem[i].classList.add('d-none')
    }
} 
 



serviceBtn.addEventListener('click', moreService) 
 
function moreService (e) { 
    e.preventDefault() 
    if(flag == 0) {  
         for (let i = 0 ; i< serviceItem.length; i++) { 
            serviceItem[i].classList.remove('d-none') 
        }
      
        serviceBtnLink.innerHTML = "Скрыть";
        flag = 1; 
    }
    else { 
        for (let i = 0 ; i< serviceItem.length; i++) { 
            if( i >= countServiceItem) { 
                serviceItem[i].classList.add('d-none')
            }
        }
      
        serviceBtnLink.innerHTML = "Открыть полный список услуг";
        flag = 0;
    }
   
}